function send(a,b){if(a!==void 0&&b!==void 0){const{method:c,url:d,payload:e}=b;let f;e!==void 0&&(f=JSON.stringify(e).replace("%s",a)),fetch(d,{method:c||"POST",body:f}).then(a=>{alert(400<=a.status?`Error: ${a.status}`:`Sent!`)}).catch(a=>{alert(`Error: ${a}`)}),ga("set","checkProtocolTask",()=>{}),ga("send",{hitType:"event",eventCategory:"contextMenu",eventAction:"webhook"})}else alert("Error: Webhook action is not defined.")}chrome.storage.sync.get({webhooks:"[]"},a=>{const b=JSON.parse(a.webhooks);b.forEach(a=>{const b=a.targetUrlPatterns!==void 0&&0<a.targetUrlPatterns.length;b?(chrome.contextMenus.create({documentUrlPatterns:a.documentUrlPatterns,title:`Send Link to ${a.name}`,contexts:["link"],targetUrlPatterns:a.targetUrlPatterns,onclick:b=>{send(b.linkUrl,a.action)}}),chrome.contextMenus.create({documentUrlPatterns:a.documentUrlPatterns,title:`Send Image to ${a.name}`,contexts:["image"],targetUrlPatterns:a.targetUrlPatterns,onclick:b=>{send(b.srcUrl,a.action)}})):chrome.contextMenus.create({documentUrlPatterns:a.documentUrlPatterns,title:`Send "%s" to ${a.name}`,contexts:["selection"],onclick:b=>{send(b.selectionText,a.action)}})})});